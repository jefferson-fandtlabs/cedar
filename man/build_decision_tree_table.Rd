% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/build_decision_tree_table.R
\name{build_decision_tree_table}
\alias{build_decision_tree_table}
\title{Build Decision Tree Table}
\usage{
build_decision_tree_table(
  tree_structure,
  costs,
  probabilities,
  health_outcomes,
  cost_associations,
  probability_associations,
  health_outcome_associations,
  edge_properties = NULL
)
}
\arguments{
\item{tree_structure}{A named list where each name is a node number and the value
is a vector of child node numbers. For example, list("1" = c(2, 3)) means node 1
connects to nodes 2 and 3. All trees must start with node 1.}

\item{costs}{A named list where each name is a cost label and the value is the
cost amount (numeric). For example, list("c1" = 1000.50).}

\item{probabilities}{A named list where each name is a probability label and the
value is a probability between 0 and 1. For example, list("p1" = 0.75).}

\item{health_outcomes}{A named list where each name is a health outcome label and
the value is the outcome value (numeric). For example, list("qaly1" = 0.8).}

\item{cost_associations}{A data frame or tibble with columns: name, from_node,
to_node. Associates cost labels to node connections. Only terminal nodes should
have cost associations.}

\item{probability_associations}{A data frame or tibble with columns: name, from_node,
to_node. Associates probability labels to node connections. Required for all
connections except those originating from node 1 (decision node).}

\item{health_outcome_associations}{A data frame or tibble with columns: name,
from_node, to_node. Associates health outcome labels to node connections. Only
terminal nodes should have health outcome associations.}

\item{edge_properties}{Optional data frame or tibble with edge properties. Must
include columns: from_node, to_node, plus any edge-specific properties (e.g.,
duration, quantity). Used with \code{\link{calculate_composite_costs}} for
cost calculations with multipliers.}
}
\value{
A data frame with columns: from_node, to_node, probability,
  probability_label, cost, cost_label, health_outcome, health_outcome_label,
  plus any additional columns from edge_properties. Each row represents a
  connection in the decision tree. Label columns contain the names from the
  association inputs (e.g., "p1", "c1", "qaly1") and are used for
  visualization.
}
\description{
Converts a tree structure representation into a tabular format for decision tree
analysis. Takes tree structure, costs, probabilities, and health outcomes along
with their associations to create a table showing all node connections with their
associated values.
}
\details{
The function follows these rules:
\itemize{
  \item All trees must start with node 1
  \item Node 1 is the decision node and connections from it do not require probabilities
  \item All other connections require probabilities
  \item Costs and health outcomes are only assigned to terminal nodes
  \item One parent node can have multiple child nodes
}
}
\examples{
\dontrun{
# Define tree structure
tree <- list(
  "1" = c(2, 3),
  "2" = c(4, 5),
  "3" = c(6, 7)
)

# Define costs
costs <- list("c1" = 1000, "c2" = 1500, "c3" = 2000, "c4" = 2500)

# Define probabilities
probs <- list("p1" = 0.6, "p2" = 0.4, "p3" = 0.7, "p4" = 0.3)

# Define health outcomes
outcomes <- list("qaly1" = 0.8, "qaly2" = 0.6, "qaly3" = 0.9, "qaly4" = 0.7)

# Define associations
cost_assoc <- tibble::tibble(
  name = c("c1", "c2", "c3", "c4"),
  from_node = c(2, 2, 3, 3),
  to_node = c(4, 5, 6, 7)
)

prob_assoc <- tibble::tibble(
  name = c("p1", "p2", "p3", "p4"),
  from_node = c(2, 2, 3, 3),
  to_node = c(4, 5, 6, 7)
)

outcome_assoc <- tibble::tibble(
  name = c("qaly1", "qaly2", "qaly3", "qaly4"),
  from_node = c(2, 2, 3, 3),
  to_node = c(4, 5, 6, 7)
)

# Build table
tree_table <- build_decision_tree_table(
  tree, costs, probs, outcomes,
  cost_assoc, prob_assoc, outcome_assoc
)
}

}
