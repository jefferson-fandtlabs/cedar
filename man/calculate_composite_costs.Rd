% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_composite_costs.R
\name{calculate_composite_costs}
\alias{calculate_composite_costs}
\title{Calculate Composite Costs from Cost Components}
\usage{
calculate_composite_costs(
  cost_components,
  base_costs,
  edge_properties = NULL,
  discount_rate = NULL
)
}
\arguments{
\item{cost_components}{A cost_components object created by
\code{\link{specify_cost_components}}}

\item{base_costs}{A named list of primitive cost values. Names must match the
\code{base_cost_name} values in \code{cost_components}}

\item{edge_properties}{A data frame with columns for edge properties. Must
include \code{from_node} and \code{to_node} columns, plus columns matching
the \code{multiplier_type} values used in \code{cost_components} (e.g.,
"duration", "quantity"). Only required if \code{cost_components} uses
NA multiplier_value entries.}

\item{discount_rate}{Optional numeric discount rate as a decimal (e.g., 0.03
for 3%). If NULL (default), no discounting is applied. When provided,
discounting is automatically applied to components with
\code{multiplier_type = "duration"}}
}
\value{
A named list of calculated composite costs, ready to be used with
  \code{\link{build_decision_tree_table}}
}
\description{
Calculates composite costs from specified cost components, base costs, and
edge properties. This function handles cost multipliers (duration, quantity),
optional time discounting, and aggregation of multiple cost components into
final composite cost values.
}
\details{
The function processes cost components in the following steps:
\enumerate{
  \item For each cost component, retrieve the base cost value from \code{base_costs}
  \item Determine the multiplier value:
    \itemize{
      \item If \code{multiplier_value} is not NA, use that value
      \item If \code{multiplier_value} is NA, lookup from \code{edge_properties}
        using \code{multiplier_type} as the column name and matching
        \code{edge_from} and \code{edge_to}
      \item If \code{multiplier_type = "none"}, use multiplier = 1
    }
  \item Apply discounting if:
    \itemize{
      \item \code{discount_rate} is provided (not NULL)
      \item AND \code{multiplier_type = "duration"}
    }
  \item Calculate component cost: \code{base_cost * multiplier * discount_factor}
  \item Sum all components for each unique \code{cost_label}
}
}
\examples{
\dontrun{
# Define base costs
base_costs <- list(
  c_biologic = 30000,
  c_fail_year = 5000,
  c_success_year = 1000
)

# Define edge properties
edge_props <- tibble::tribble(
  ~from_node, ~to_node, ~duration,
  7, 10, 1,
  10, 19, 4
)

# Define cost components
cost_comps <- tibble::tribble(
  ~cost_label, ~base_cost_name, ~multiplier_type, ~multiplier_value, ~edge_from, ~edge_to,
  "c_biol_2_success", "c_biologic", "quantity", 1, 4, 7,
  "c_biol_2_success", "c_biologic", "quantity", 1, 7, 10,
  "c_biol_2_success", "c_fail_year", "duration", NA, 7, 10,
  "c_biol_2_success", "c_success_year", "duration", NA, 10, 19
) \%>\%
  specify_cost_components()

# Calculate costs with discounting
costs <- calculate_composite_costs(
  cost_comps,
  base_costs,
  edge_props,
  discount_rate = 0.03
)

# Calculate costs without discounting
costs_no_disc <- calculate_composite_costs(
  cost_comps,
  base_costs,
  edge_props,
  discount_rate = NULL
)
}

}
\seealso{
\code{\link{specify_cost_components}},
  \code{\link{apply_discount}},
  \code{\link{build_decision_tree_table}}
}
