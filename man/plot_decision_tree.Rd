% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_decision_tree.R
\name{plot_decision_tree}
\alias{plot_decision_tree}
\title{Plot Decision Tree}
\usage{
plot_decision_tree(
  tree_table,
  node_names = NULL,
  show_probabilities = TRUE,
  show_time = TRUE,
  show_costs = TRUE,
  show_health_outcomes = TRUE,
  node_spacing = 2
)
}
\arguments{
\item{tree_table}{A data frame created by \code{\link{build_decision_tree_table}}
containing columns: from_node, to_node, probability, probability_label,
cost, cost_label, health_outcome, health_outcome_label, and optionally
edge properties like years, months, days, hours, or minutes.}

\item{node_names}{Optional named list where names are node numbers (as
character or integer) and values are custom names for the nodes. For
example, \code{list("2" = "Treatment A", "3" = "Treatment B")}. If NULL,
no custom names are displayed.}

\item{show_probabilities}{Logical. If TRUE, displays probability labels
above edges. Default is TRUE.}

\item{show_time}{Logical. If TRUE, displays time duration labels below edges
when available in edge_properties. Default is TRUE.}

\item{show_costs}{Logical. If TRUE, displays cost labels below terminal
nodes. Default is TRUE.}

\item{show_health_outcomes}{Logical. If TRUE, displays health outcome labels
below terminal nodes (and below costs if present). Default is TRUE.}

\item{node_spacing}{Numeric. Controls vertical spacing between nodes at the
same level. Default is 2.}
}
\value{
A ggplot2 object representing the decision tree visualization. The
  plot can be displayed, saved, or further customized using ggplot2 functions.
}
\description{
Creates a visual representation of a decision tree from the table structure
created by \code{\link{build_decision_tree_table}}. The visualization uses
different shapes and colors to distinguish between decision nodes, chance
nodes, and terminal nodes, with labeled edges showing probabilities and
time durations.
}
\details{
The function creates a hierarchical left-to-right visualization with the
following characteristics:

\strong{Node Types and Styling:}
\itemize{
  \item \strong{Decision Node (Node 1):} Green circle with black outline
  \item \strong{Chance Nodes:} Yellow squares with black outline (nodes with
    both parents and children)
  \item \strong{Terminal Nodes:} Red triangles (rotated -90 degrees) with
    black outline
}

\strong{Node Labels:}
\itemize{
  \item Node number displayed inside each shape
  \item Optional custom name displayed below node (if node_names provided)
  \item Cost label displayed below custom name (if present and show_costs = TRUE)
  \item Health outcome label displayed below cost (if present and
    show_health_outcomes = TRUE)
}

\strong{Edge Labels:}
\itemize{
  \item \strong{Probability:} Displayed above edge in format "label = value"
    (e.g., "p1 = 0.6"). Only shown for edges with probabilities and when
    show_probabilities = TRUE.
  \item \strong{Time Duration:} Displayed below edge in format "time = amount
    unit" (e.g., "time = 5 years"). The function searches for time columns
    in this order: years, months, days, hours, minutes. Only shown when
    show_time = TRUE and time data is available.
}

\strong{Layout Algorithm:}
\itemize{
  \item Nodes are arranged left-to-right based on tree depth
  \item Vertical spacing is distributed evenly for nodes at the same depth
  \item Horizontal spacing is consistent between levels
}
}
\examples{
\dontrun{
# Define tree structure
tree <- list(
  "1" = c(2, 3),
  "2" = c(4, 5),
  "3" = c(6, 7)
)

# Define costs, probabilities, and outcomes
costs <- list("c1" = 1000, "c2" = 1500, "c3" = 2000, "c4" = 2500)
probs <- list("p1" = 0.6, "p2" = 0.4, "p3" = 0.7, "p4" = 0.3)
outcomes <- list("qaly1" = 0.8, "qaly2" = 0.6, "qaly3" = 0.9, "qaly4" = 0.7)

# Define associations
cost_assoc <- data.frame(
  name = c("c1", "c2", "c3", "c4"),
  from_node = c(2, 2, 3, 3),
  to_node = c(4, 5, 6, 7)
)

prob_assoc <- data.frame(
  name = c("p1", "p2", "p3", "p4"),
  from_node = c(2, 2, 3, 3),
  to_node = c(4, 5, 6, 7)
)

outcome_assoc <- data.frame(
  name = c("qaly1", "qaly2", "qaly3", "qaly4"),
  from_node = c(2, 2, 3, 3),
  to_node = c(4, 5, 6, 7)
)

# Build table
tree_table <- build_decision_tree_table(
  tree, costs, probs, outcomes,
  cost_assoc, prob_assoc, outcome_assoc
)

# Create visualization
plot_decision_tree(tree_table)

# With custom node names
node_names <- list(
  "2" = "Treatment A",
  "3" = "Treatment B",
  "4" = "Success (A)",
  "5" = "Failure (A)",
  "6" = "Success (B)",
  "7" = "Failure (B)"
)
plot_decision_tree(tree_table, node_names = node_names)

# Minimal visualization (no labels)
plot_decision_tree(
  tree_table,
  show_probabilities = FALSE,
  show_costs = FALSE,
  show_health_outcomes = FALSE
)
}

}
\seealso{
\code{\link{build_decision_tree_table}} for creating the tree table input
}
